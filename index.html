<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LIFE — A Lifetime Timeline</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background: #111;
  color: #eee;
  max-width: 900px;
  margin: auto;
  padding: 40px;
}

h1, p {
  text-align: center;
}

.inputs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 30px;
}

label {
  display: flex;
  flex-direction: column;
  font-size: 14px;
}

input {
  margin-top: 6px;
  padding: 6px;
  background: #222;
  color: #fff;
  border: 1px solid #333;
}

button {
  margin-top: 20px;
  padding: 12px;
  width: 100%;
  font-size: 16px;
  background: #fff;
  color: #000;
  border: none;
  cursor: pointer;
}

#timeline {
  display: flex;
  height: 50px;
  margin-top: 40px;
  border-radius: 6px;
  overflow: hidden;
}

.segment {
  height: 100%;
}

#stepText {
  margin-top: 20px;
  text-align: center;
  font-size: 16px;
}

.legend {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  font-size: 13px;
}

.legend div {
  display: flex;
  align-items: center;
  gap: 6px;
}

.color {
  width: 14px;
  height: 14px;
}
</style>
</head>

<body>

<h1>LIFE</h1>
<p>Watch your remaining lifetime disappear</p>

<div class="inputs">
  <label>Current age
    <input id="age" type="number" value="25">
  </label>

  <label>Retirement age
    <input id="retire" type="number" value="67">
  </label>

  <label>Age started working
    <input id="startWork" type="number" value="18">
  </label>

  <label>Sleep (hours/day)
    <input id="sleep" type="number" step="0.1" value="8">
  </label>

  <label>Work (hours/week)
    <input id="work" type="number" value="40">
  </label>

  <label>Commute (hours/day)
    <input id="commute" type="number" step="0.1" value="1">
  </label>

  <label>Screen time (hours/day)
    <input id="screen" type="number" step="0.1" value="4">
  </label>
</div>

<button onclick="nextStep()">Next</button>

<div id="timeline"></div>
<div id="stepText"></div>
<div class="legend" id="legend"></div>

<script>
const LIFE_EXPECTANCY = 80;
let step = 0;

function nextStep() {
  step++;
  render();
}

function render() {

  const age = +ageInput.value;
  const retire = +retireInput.value;
  const startWork = +startWorkInput.value;
  const sleep = +sleepInput.value;
  const work = +workInput.value;
  const commute = +commuteInput.value;
  const screen = +screenInput.value;

  const totalLifeYears = LIFE_EXPECTANCY;
  let remainingYears = LIFE_EXPECTANCY - age;

  const segments = [];

  // STEP 0 — Full life
  segments.push({ name: "Life", years: totalLifeYears, color: "#333" });
  let description = "This is your entire life from birth to age 80.";

  if (step >= 1) {
    segments.length = 0;
    segments.push({ name: "Lived", years: age, color: "#444" });
    segments.push({ name: "Remaining", years: remainingYears, color: "#ffd700" });
    description = "This is how much life you have left.";
  }

  if (step >= 2) {
    const sleepYears = (sleep * 365 * LIFE_EXPECTANCY) / (24 * 365);
    remainingYears -= sleepYears;
    segments.push({ name: "Sleep", years: sleepYears, color: "#7b61ff" });
    description = "This is how much of your life will be spent sleeping.";
  }

  if (step >= 3) {
    const workYears = Math.max(retire - startWork, 0);
    const workTimeYears = (workYears * 52 * work) / (24 * 365);
    const commuteYears = (workYears * 52 * commute * 5) / (24 * 365);

    remainingYears -= (workTimeYears + commuteYears);

    segments.push({ name: "Work", years: workTimeYears, color: "#555" });
    segments.push({ name: "Commute", years: commuteYears, color: "#ff8c00" });

    description = "Work and commuting consume this much of your life.";
  }

  if (step >= 4) {
    const screenYears = ((LIFE_EXPECTANCY - 18) * 365 * screen) / (24 * 365);
    remainingYears -= screenYears;
    segments.push({ name: "Screen", years: screenYears, color: "#4aa3ff" });
    description = "Screens quietly take this portion of your lifetime.";
  }

  if (step >= 5) {
    const hygiene = 0.5;
    const toilet = 0.75;
    const cooking = 1.5;
    const chores = 0.5;

    const routineYears =
      ((hygiene + toilet + cooking + chores) * 365 * LIFE_EXPECTANCY) / (24 * 365);

    remainingYears -= routineYears;

    segments.push({ name: "Daily routines", years: routineYears, color: "#795548" });
    description = "Invisible routines add up to years of your life.";
  }

  if (step >= 6) {
    segments.push({ name: "Free Time", years: Math.max(remainingYears, 0), color: "#00e676" });
    description = "This is what truly remains.";
  }

  draw(segments, description);
}

function draw(segments, text) {
  timeline.innerHTML = "";
  legend.innerHTML = "";

  segments.forEach(s => {
    const div = document.createElement("div");
    div.className = "segment";
    div.style.width = (s.years / LIFE_EXPECTANCY) * 100 + "%";
    div.style.background = s.color;
    timeline.appendChild(div);

    const l = document.createElement("div");
    l.innerHTML = `<span class="color" style="background:${s.color}"></span>
                   ${s.name} (${s.years.toFixed(1)} yrs)`;
    legend.appendChild(l);
  });

  stepText.textContent = text;
}

const ageInput = document.getElementById("age");
const retireInput = document.getElementById("retire");
const startWorkInput = document.getElementById("startWork");
const sleepInput = document.getElementById("sleep");
const workInput = document.getElementById("work");
const commuteInput = document.getElementById("commute");
const screenInput = document.getElementById("screen");
</script>

</body>
</html>
